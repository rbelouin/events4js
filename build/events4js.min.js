/* 
 * events4js is a javascript logging library writte by Quentin ADAM - @waxzce
 * MIT licence
 **/
 
if(modules===undefined){modules={}}modules.events4js=function(c,b){var a=(function(){a=function(){this.initialize()};var d=a.prototype;d.initialize=function(e){this._e4js={};this._e4js.events={};this._e4js.allevents=[];this._e4js.onces={};this._e4js.eventsfollow=[];if(e!=undefined){if(e.autoLaunch!=undefined){for(var f in e.autoLaunch){for(var g in e.autoLaunch[f]){this.addEventListener(e.autoLaunch[f][g],this._repeatEvent_fnct_producer(f))}}}if(e.waitFor!=undefined){this._e4js.waitFor={};this._e4js.waitFor.t={};this._e4js.waitFor.values={};this.addAllEventsListener(this._computeEvents_fnct_producer());for(var f in e.waitFor){this._e4js.waitFor.values[f]={};var h=e.waitFor[f];for(var g in h){this._e4js.waitFor.values[f][h[g]]=false;if(this._e4js.waitFor.t[h[g]]==undefined){this._e4js.waitFor.t[h[g]]=[]}this._e4js.waitFor.t[h[g]].push(f)}}}}};d.addEventListener=function(e,f){if(this._e4js.events[e]==undefined){this._e4js.events[e]=[f]}else{this._e4js.events[e].push(f)}};d.addOnceListener=function(e,f){if(this._e4js.onces[e]==undefined){this._e4js.onces[e]=[f]}else{this._e4js.onces[e].push(f)}};d.addAllEventsListener=function(e){this._e4js.allevents.push(e)};d._removeListener=function(g,h,f){if(f[g]!=undefined){for(var e in f[g]){if(f[g][e]===h){f[g].splice(e,1);break}}}};d._addEventFollow=function(e){this._e4js.eventsfollow.push(e)};d._repeatEvent_fnct_producer=function(e){var f=e;var g=this;var h=this._addEventFollow;return function(){h.apply(g,[f])}};d._computeEvents=function(g,l){if(this._e4js.waitFor.t[g]!=undefined){for(var h in this._e4js.waitFor.t[g]){var m=this._e4js.waitFor.t[g][h];this._e4js.waitFor.values[m][g]=true}var k=this._e4js.waitFor.values;for(var h in k){var f=true;for(var j in k[h]){f=f&&k[h][j]}if(f){for(var j in k[h]){k[h][j]=false}this._e4js.eventsfollow.push(h)}}}};d._computeEvents_fnct_producer=function(){var e=this;var f=this._computeEvents;return function(g,h){f.apply(e,[g,h])}};d.removeEventListener=function(e,f){this._removeListener(e,f,this._e4js.events)};d.removeOnceListener=function(e,f){this._removeListener(e,f,this._e4js.onces)};d.removeAllEventListeners=function(e){this._e4js.events[e]=[]};d.removeAllOnceListeners=function(e){this._e4js.onces[e]=[]};d.removeAllEventsListeners=function(){this._e4js.events={}};d.fireEvent=function(g,j){this._e4js.eventsfollow=[];if(this._e4js.onces[g]!==undefined){for(var f in this._e4js.onces[g]){try{this._e4js.onces[g][f](j)}catch(i){var h=c("logger4js");h.error("error when once "+g+" fire ",i)}this._e4js.onces[g].splice(f,1)}}if(this._e4js.events[g]!==undefined){for(var f in this._e4js.events[g]){try{this._e4js.events[g][f](j)}catch(i){var h=c("logger4js");h.error("error when event "+g+" fire ",i)}}}for(var f in this._e4js.allevents){try{this._e4js.allevents[f](g,j)}catch(i){var h=c("logger4js");h.error("error when allevents "+g+" fire ",i)}}for(var f in this._e4js.eventsfollow){this.fireEvent(this._e4js.eventsfollow[f],j)}this._e4js.eventsfollow=[]};return a})();b.EventProducer=a};